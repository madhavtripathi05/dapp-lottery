(this["webpackJsonplottery-react"]=this["webpackJsonplottery-react"]||[]).push([[0],{206:function(e,t,n){},208:function(e,t,n){},220:function(e,t){},243:function(e,t){},245:function(e,t){},321:function(e,t){},323:function(e,t){},355:function(e,t){},360:function(e,t){},362:function(e,t){},369:function(e,t){},382:function(e,t){},400:function(e,t){},407:function(e,t){},409:function(e,t){},483:function(e,t,n){"use strict";n.r(t);var r,a=n(14),c=n.n(a),s=n(198),i=n.n(s),u=(n(206),n(16)),o=n.n(u),l=n(72),d=n(23),b=(n(208),n(107)),p=n.n(b);"undefined"!==typeof window&&"undefined"!==typeof window.ethereum?(window.ethereum.request({method:"eth_requestAccounts"}),r=new p.a(window.ethereum),console.log(r.eth.accounts)):window.web3?(r=new p.a(window.web3.currentProvider),console.log(r.eth.accounts)):alert("You have to install MetaMask !");var j=r,h=new j.eth.Contract([{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"currentWinner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"enter",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"getCurrentWinner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPlayers",outputs:[{internalType:"address payable[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"manager",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pickWinner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"players",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"}],"0xAF3fc85741e2BD214C9C2e4500b77F0979ed129E"),f=n(8);var y=function(){var e=Object(a.useState)("Loading..."),t=Object(d.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),s=Object(d.a)(c,2),i=s[0],u=s[1],b=Object(a.useState)(""),p=Object(d.a)(b,2),y=p[0],O=p[1],m=Object(a.useState)(""),x=Object(d.a)(m,2),w=x[0],g=x[1],v=Object(a.useState)([]),k=Object(d.a)(v,2),C=k[0],S=k[1],M=Object(a.useState)(""),T=Object(d.a)(M,2),W=T[0],F=T[1],E=Object(a.useState)(""),P=Object(d.a)(E,2),A=P[0],L=P[1],B=Object(a.useState)(!1),D=Object(d.a)(B,2),N=D[0],Y=D[1],q=Object(a.useState)(!1),I=Object(d.a)(q,2),J=I[0],G=I[1];Object(a.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.eth.getAccounts();case 2:return t=e.sent,g(t[0]),e.t0=r,e.next=7,h.methods.manager().call();case 7:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=S,e.next=12,h.methods.getPlayers().call();case 12:return e.t3=e.sent,(0,e.t2)(e.t3),e.t4=L,e.next=17,h.methods.getCurrentWinner().call();case 17:return e.t5=e.sent,(0,e.t4)(e.t5),e.t6=F,e.next=22,j.eth.getBalance(h.options.address);case 22:e.t7=e.sent,(0,e.t6)(e.t7);case 24:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[N]);var H=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),G(!0),O("Processing your transaction..."),console.log(w),e.next=6,h.methods.enter().send({from:w,value:j.utils.toWei(i,"ether")});case 6:u(""),O("You've been entered!"),G(!1),Y(!N);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G(!0),O("Choosing a winner..."),e.next=4,h.methods.pickWinner().send({from:w});case 4:return e.next=6,h.methods.getCurrentWinner().call();case 6:t=e.sent,console.log("result",t),L(t),O("Winner is selected"),G(!1),Y(!N);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"",children:[Object(f.jsx)("h2",{children:"Lottery Smart Contract"}),Object(f.jsxs)("p",{children:["This contract is managed by ",n]}),Object(f.jsxs)("p",{children:["Currently there are ",C.length," players entered with total of"," ",j.utils.fromWei(W,"ether")," ether"]}),w?Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("p",{children:["Your account: ",w]})}):Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("p",{children:["Please login to your metamask account to continue, already done?"," ",Object(f.jsx)("span",{children:Object(f.jsx)("button",{onClick:function(){return Y(!N)},children:"reload"})})]})}),Object(f.jsx)("hr",{}),Object(f.jsxs)("form",{onSubmit:H,children:[Object(f.jsx)("h4",{children:"Try your luck!"}),Object(f.jsx)("h3",{children:"Minimum amount: 0.002 ether"}),Object(f.jsxs)("div",{className:"",children:[Object(f.jsx)("label",{children:Object(f.jsx)("h3",{children:"Enter amount in ether: "})}),Object(f.jsx)("input",{type:"text",value:i,onChange:function(e){return u(e.target.value)}})]}),Object(f.jsx)("br",{}),Object(f.jsx)("button",{children:"Enter"}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),"0xfb2F3A65c7EEA39b9b07D62ae5E3Acd168640689"===w&&Object(f.jsx)("button",{type:"button",onClick:_,children:"Pick a winner"})]}),Object(f.jsx)("h4",{children:y}),J&&Object(f.jsx)("svg",{className:"spinner",width:"65px",height:"65px",viewBox:"0 0 66 66",xmlns:"http://www.w3.org/2000/svg",children:Object(f.jsx)("circle",{className:"path",fill:"none",strokeWidth:"6",strokeLinecap:"round",cx:"33",cy:"33",r:"30"})}),A&&Object(f.jsxs)("h4",{children:["Last winner: ",A]}),Object(f.jsx)("span",{children:Object(f.jsx)("a",{href:"https://github.com/madhavtripathi05/dapp-lottery",children:"GitHub"})})]})},O=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,487)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};i.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(y,{})}),document.getElementById("root")),O()}},[[483,1,2]]]);
//# sourceMappingURL=main.a800d4f8.chunk.js.map